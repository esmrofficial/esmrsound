<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E~SMR v7 – Veo3 Prompt + Auto Filename (EN/JP)</title>
  <meta name="robots" content="noindex, nofollow" />
  <meta name="description" content="E~SMR v7: Generate Veo3 prompts with a descriptive English filename. Output EN prompt (with 'Save as'), JP reference, filename, title, and hashtags." />
  <meta name="theme-color" content="#6fd3c2" />
  <style>
    :root{--bg:#f7fbfa;--ink:#13201c;--muted:#3b6b63;--line:#dbe9e5;--brand:#2fbfa3;--brand2:#6ad3c3;--card:#fff}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Noto Sans JP',sans-serif;color:var(--ink);background:var(--bg)}
    header{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.9);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--line)}
    .nav{max-width:1080px;margin:0 auto;display:flex;gap:12px;align-items:center;padding:10px 16px}
    .ver{font-weight:800;color:#165a50}
    .nav a.btn{margin-left:auto;display:inline-block;padding:10px 14px;border-radius:999px;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#08332e;font-weight:700;box-shadow:0 8px 18px rgba(47,191,163,.25);text-decoration:none}
    section{max-width:1080px;margin:0 auto;padding:22px 16px}
    h1{margin:6px 0 12px}
    .row{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media (max-width:900px){.row{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 12px 24px rgba(0,0,0,.05);margin-bottom:12px}
    label{font-weight:700;color:#175d53;display:block;margin-bottom:6px}
    select,input[type=text]{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#fff;font-size:14px}
    .opt{margin-top:10px}
    .btn{cursor:pointer;border:none;border-radius:12px;padding:12px 18px;font-weight:800;letter-spacing:.02em}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#072927;box-shadow:0 8px 18px rgba(47,191,163,.25)}
    .btn.ghost{background:#fff;border:2px solid var(--brand);color:#12695d}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
    .outWrap{margin-top:16px;display:grid;gap:12px}
    .outHead{display:flex;align-items:center;gap:8px;margin-bottom:6px}
    .outTitle{font-weight:800;color:#175d53}
    textarea.out{width:100%;min-height:100px;padding:10px;border-radius:10px;border:1px solid var(--line);background:#fff;resize:vertical;line-height:1.6;overflow-wrap:anywhere;white-space:pre-wrap;font-family:ui-monospace, SFMono-Regular, Menlo, monospace}
    .copyBtn{cursor:pointer;border:none;border-radius:10px;padding:8px 10px;font-weight:700;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#072927}
    footer{margin-top:30px;border-top:1px solid var(--line);background:#fbfffe}
    .foot{max-width:1080px;margin:0 auto;padding:14px 16px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;color:#456}
    .mini{font-size:12px;color:#597}
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="ver">E~SMR v7</div>
      <a class="btn" href="#tool">Create Prompt</a>
    </nav>
  </header>

  <section id="tool">
    <h1>🎬 Veo3 Prompt + Auto Filename Generator（EN/JP）</h1>
    <p class="mini">選んで「✨生成」を押すだけ。Veo3に渡す英語プロンプト（<strong>Save the file as:</strong> 指示入り）と、JP参考文／英語ファイル名／YouTubeタイトル／ハッシュタグを自動生成します。</p>

    <div class="row">
      <div class="card">
        <label>行動（Action）</label>
        <select id="actionSel">
          <option value="">選択</option>
          <option>切る</option><option>潰す</option><option>落とす</option>
          <option>こねる</option><option>叩く</option><option>混ぜる</option><option>焼く</option>
        </select>
        <input id="actionIn" type="text" placeholder="自由入力（例：薄くスライス、軽く叩く）" class="opt" />
      </div>

      <div class="card">
        <label>材質（Material）</label>
        <select id="matSel">
          <option value="">選択</option>
          <option>ガラス</option><option>木製</option><option>石</option><option>金属</option><option>布</option><option>溶岩</option>
        </select>
        <input id="matIn" type="text" placeholder="自由入力（例：紙、プラスチック）" class="opt" />
      </div>

      <div class="card">
        <label>アイテム（Item）</label>
        <select id="itemSel">
          <option value="">選択</option>
          <option>ぶどう</option><option>スイカ</option><option>リンゴ</option><option>トマト</option><option>きゅうり</option><option>魚</option>
        </select>
        <input id="itemIn" type="text" placeholder="自由入力（例：サーモン、ガラス球）" class="opt" />
      </div>

      <div class="card">
        <label>補足（Detail / Context）</label>
        <select id="ctxSel">
          <option value="">選択</option>
          <option>クローズアップ</option><option>テーブルの上</option><option>屋外</option><option>手で持って</option><option>暗めの照明</option>
        </select>
        <input id="ctxIn" type="text" placeholder="自由入力（例：木のテーブル、スタジオ照明、スローモーション）" class="opt" />
      </div>
    </div>

    <div class="card">
      <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="asmr" /> ASMR強化（近接マイク／BGMなし／自然音）</label>
      <div class="actions">
        <button class="btn primary" onclick="gen()">✨ 生成</button>
        <button class="btn ghost" onclick="clr()">リセット</button>
      </div>
    </div>

    <div id="outWrap" class="outWrap" style="display:none">
      <div class="card">
        <div class="outHead"><div class="outTitle">🗂️ Filename (EN)</div><button class="copyBtn" onclick="copyText('fname')">📋 Copy</button></div>
        <textarea id="fname" class="out" readonly></textarea>
      </div>

      <div class="card">
        <div class="outHead"><div class="outTitle">🌍 Veo3 Prompt (English, includes “Save the file as”)</div><button class="copyBtn" onclick="copyText('enPrompt')">📋 Copy</button></div>
        <textarea id="enPrompt" class="out" readonly></textarea>
      </div>

      <div class="card">
        <div class="outHead"><div class="outTitle">🈯 Veo3 プロンプト（日本語参考）</div><button class="copyBtn" onclick="copyText('jpPrompt')">📋 コピー</button></div>
        <textarea id="jpPrompt" class="out" readonly></textarea>
      </div>

      <div class="card">
        <div class="outHead"><div class="outTitle">🎬 YouTube Title (EN)</div><button class="copyBtn" onclick="copyText('ytTitle')">📋 Copy</button></div>
        <textarea id="ytTitle" class="out" readonly></textarea>
      </div>

      <div class="card">
        <div class="outHead"><div class="outTitle">#️⃣ Hashtags (EN)</div><button class="copyBtn" onclick="copyText('tags')">📋 Copy</button></div>
        <textarea id="tags" class="out" readonly></textarea>
      </div>
    </div>
  </section>

  <footer>
    <div class="foot"><strong>E~SMR v7 ©2025 – Created by hot-road</strong></div>
  </footer>

<script>
  const mapAction = {"切る":"cutting","潰す":"crushing","落とす":"dropping","こねる":"kneading","叩く":"pounding","混ぜる":"mixing","焼く":"grilling"};
  const mapMat = {"ガラス":"glass","木製":"wooden","石":"stone","金属":"metal","布":"fabric","溶岩":"lava"};
  const mapItem = {"ぶどう":"grapes","スイカ":"watermelon","リンゴ":"apple","トマト":"tomato","きゅうり":"cucumber","魚":"fish"};
  const mapCtx = {"クローズアップ":"closeup","テーブルの上":"on table","屋外":"outdoors","手で持って":"handheld","暗めの照明":"low light"};

  const pick=(sel,inId)=>document.getElementById(inId).value.trim()||document.getElementById(sel).value.trim();
  function toEN(dict, jp){ return dict[jp] || jp; }
  function slugify(s){
    return s.toLowerCase()
      .replace(/[áàäâ]/g,'a').replace(/[éèëê]/g,'e').replace(/[íìïî]/g,'i').replace(/[óòöô]/g,'o').replace(/[úùüû]/g,'u')
      .replace(/[^a-z0-9]+/g,'_').replace(/^_+|_+$/g,'').replace(/_+/g,'_');
  }
  function titleCase(s){ return s.replace(/\b\w/g, c=>c.toUpperCase()); }
  function hashTagToken(s){
    const t = s.replace(/[^a-z0-9 ]+/gi,' ').trim().split(/\s+/).map(w=>w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join('');
    return t || 'ASMR';
  }

  function gen(){
    const aJP = pick('actionSel','actionIn');
    const mJP = pick('matSel','matIn');
    const iJP = pick('itemSel','itemIn');
    const cJP = pick('ctxSel','ctxIn');
    const asmr = document.getElementById('asmr').checked;

    if(!aJP || !mJP || !iJP){ alert('行動・材質・アイテムを入力してください'); return; }

    const aEN = toEN(mapAction, aJP);
    const mEN = toEN(mapMat, mJP);
    const iEN = toEN(mapItem, iJP);
    const cEN = cJP ? toEN(mapCtx, cJP) : '';

    const parts = [aEN, mEN, iEN, cEN].filter(Boolean);
    const base = slugify(parts.join('_'));
    const fname = base + '.mp4';

    const baseLines = [
      `Create a cinematic ASMR video of ${aEN} ${mEN} ${iEN}${cEN? ' ' + cEN : ''}.`,
      `Use macro detail and natural lighting, ${asmr? 'close-mic texture, ' : ''}no background music.`,
      `Save the file as: ${fname}`
    ];
    const enPrompt = baseLines.join('\n');

    const jpNoun = `${mJP}の${iJP}`;
    const jpLines = [
      `${jpNoun}を${aJP}ASMR映像を生成してください（${cJP||'状況指定なし'}）。`,
      `マクロ表現・自然光・${asmr? '近接マイク・' : ''}BGMなし。`,
      `ファイル名は「${fname}」にしてください。`
    ];
    const jpPrompt = jpLines.join('\n');

    const titleEN = `ASMR | ` + titleCase(`${aEN} ${mEN} ${iEN}${cEN? ' ' + cEN : ''}`.replace(/\s+/g,' ').trim());

    const tags = [
      '#ASMR','#Esmr',
      '#'+hashTagToken(mEN),
      '#'+hashTagToken(iEN),
      '#'+hashTagToken(aEN),
      cEN? '#'+hashTagToken(cEN) : '',
      '#Relaxing','#Veo3'
    ].filter(Boolean).join(' ');

    document.getElementById('outWrap').style.display='grid';
    document.getElementById('fname').value = fname;
    document.getElementById('enPrompt').value = enPrompt;
    document.getElementById('jpPrompt').value = jpPrompt;
    document.getElementById('ytTitle').value = titleEN;
    document.getElementById('tags').value = tags;
    location.hash = '#outWrap';
  }

  function clr(){
    ['actionSel','matSel','itemSel','ctxSel','asmr','actionIn','matIn','itemIn','ctxIn'].forEach(id=>{
      const el=document.getElementById(id);
      if(el.type==='checkbox'){el.checked=false}else{el.value=''}
    });
    document.getElementById('outWrap').style.display='none';
    ['fname','enPrompt','jpPrompt','ytTitle','tags'].forEach(id=>document.getElementById(id).value='');
  }
  async function copyText(id){
    const el=document.getElementById(id);
    try{
      await navigator.clipboard.writeText(el.value);
      const btn=document.querySelector(`button[onclick="copyText('${id}')"]`);
      const old=btn.textContent; btn.textContent='✅ Copied!'; setTimeout(()=>btn.textContent=old, 1200);
    }catch(e){ alert('コピーに失敗しました'); }
  }
</script>
</body>
</html>